/*C10*/SET SCHEMA PUBLIC
drop table DateProposee if exists
drop table Sondage if exists
drop table Sondage_DateProposee if exists
drop table Utilisateur if exists
drop table Utilisateur_Sondage if exists
create table Sondage (idSondage bigint generated by default as identity (start with 1), lienWeb varchar(255), createur_mail varchar(255), primary key (idSondage))
create table Sondage_DateProposee (listeSondages_idSondage bigint not null, listeDatesProposees_idDate timestamp not null)
create table Utilisateur (mail varchar(255) not null, nom varchar(255), prenom varchar(255), primary key (mail))
create table Utilisateur_Sondage (listeUtilisateurs_mail varchar(255) not null, listeSondages_idSondage bigint not null)
alter table Sondage add constraint FK_4p5av7hyi3vortf3fwge3l94e foreign key (createur_mail) references Utilisateur
alter table Sondage_DateProposee add constraint FK_du99691hqjrnfde282djyyvad foreign key (listeSondages_idSondage) references Sondage
alter table Utilisateur_Sondage add constraint FK_qts3d4puehf7dxsx8b5rw5ag5 foreign key (listeSondages_idSondage) references Sondage
alter table Utilisateur_Sondage add constraint FK_43nvhtlk3in05prc3aoewlow foreign key (listeUtilisateurs_mail) references Utilisateur
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
DROP TABLE SONDAGE_DATEPROPOSEE
DROP TABLE UTILISATEUR_SONDAGE
DROP TABLE SONDAGE
DROP TABLE UTILISATEUR
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C2*/DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
drop table DateProposee if exists
drop table Sondage if exists
drop table Sondage_DateProposee if exists
drop table Utilisateur if exists
drop table Utilisateur_Sondage if exists
create table DateProposee (idDate bigint generated by default as identity (start with 1), datePauge varbinary(255), datePaugeDegener varbinary(255), primary key (idDate))
create table Sondage (idSondage bigint generated by default as identity (start with 1), lienWeb varchar(255), createur_mail varchar(255), primary key (idSondage))
create table Sondage_DateProposee (listeSondages_idSondage bigint not null, listeDatesProposees_idDate bigint not null)
create table Utilisateur (mail varchar(255) not null, nom varchar(255), prenom varchar(255), primary key (mail))
create table Utilisateur_Sondage (listeUtilisateurs_mail varchar(255) not null, listeSondages_idSondage bigint not null)
alter table Sondage add constraint FK_4p5av7hyi3vortf3fwge3l94e foreign key (createur_mail) references Utilisateur
alter table Sondage_DateProposee add constraint FK_j0kqh6h78k87ci0m6e981ywha foreign key (listeDatesProposees_idDate) references DateProposee
alter table Sondage_DateProposee add constraint FK_du99691hqjrnfde282djyyvad foreign key (listeSondages_idSondage) references Sondage
alter table Utilisateur_Sondage add constraint FK_qts3d4puehf7dxsx8b5rw5ag5 foreign key (listeSondages_idSondage) references Sondage
alter table Utilisateur_Sondage add constraint FK_43nvhtlk3in05prc3aoewlow foreign key (listeUtilisateurs_mail) references Utilisateur
INSERT INTO DATEPROPOSEE VALUES(1,'aced00057372000d6a6176612e74696d652e536572955d84ba1b2248b20c00007870770703000007e3011178','aced00057372000d6a6176612e74696d652e536572955d84ba1b2248b20c00007870770703000007e3011178')
INSERT INTO DATEPROPOSEE VALUES(2,'aced00057372000d6a6176612e74696d652e536572955d84ba1b2248b20c00007870770703000007e3011178','aced00057372000d6a6176612e74696d652e536572955d84ba1b2248b20c00007870770703000007e3011178')
INSERT INTO SONDAGE VALUES(1,'lienWeb',NULL)
INSERT INTO SONDAGE VALUES(2,'lienWeb2',NULL)
INSERT INTO UTILISATEUR VALUES('gora1@gmail.com','fall','Gora')
INSERT INTO UTILISATEUR VALUES('jl1@gmail.com','le lec','Jean-Loup')
DELETE FROM SONDAGE WHERE IDSONDAGE=1
INSERT INTO SONDAGE VALUES(1,'lienWeb','gora1@gmail.com')
DELETE FROM SONDAGE WHERE IDSONDAGE=2
INSERT INTO SONDAGE VALUES(2,'lienWeb2','jl1@gmail.com')
INSERT INTO SONDAGE_DATEPROPOSEE VALUES(2,1)
INSERT INTO SONDAGE_DATEPROPOSEE VALUES(2,2)
INSERT INTO UTILISATEUR_SONDAGE VALUES('gora1@gmail.com',1)
INSERT INTO UTILISATEUR_SONDAGE VALUES('gora1@gmail.com',2)
COMMIT
DISCONNECT
